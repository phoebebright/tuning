{% extends "base.html" %}
{% load bootstrap3 %}

{% block main %}


    <div class="container">
        <div class="row">

            <div class="col-sm-3">
                <section class="panel">
                    <div class="panel-body">
                        <a href="mail_compose.html"  class="btn btn-compose">
                            {{ object.ref }}
                        </a>
                        <ul class="nav nav-pills nav-stacked mail-nav">
                            <li class="active"><a href="mail.html"> <i class="fa fa-inbox"></i> Inbox  <span class="label label-danger pull-right inbox-notification">9</span></a></li>
                            <li><a href="#"> <i class="fa fa-envelope-o"></i> Send Mail</a></li>
                            <li><a href="#"> <i class="fa fa-certificate"></i> Important</a></li>
                            <li><a href="#"> <i class="fa fa-file-text-o"></i> Drafts <span class="label label-info pull-right inbox-notification">123</span></a></a></li>
                            <li><a href="#"> <i class="fa fa-trash-o"></i> Trash</a></li>
                        </ul>
                    </div>
                </section>




            <section class="panel">
                <header class="panel-heading">
                    <h1>Booking Ref {{ object.ref }}</h1>
                            <span class="tools pull-right">
                                <a class="fa fa-chevron-down" href="javascript:;"></a>
                                <a class="fa fa-cog" href="javascript:;"></a>
                                <a class="fa fa-times" href="javascript:;"></a>
                            </span>
                </header>

                <div class="alert alert-block booking_status_{{ object.status }} fade in">
                    Booking Status {{ object.get_status_display }}
                </div>

                <div class="panel-body">
                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Client</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.client }}</span>
                        </div>
                    </div>

                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Deadline</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.deadline }}</span>
                        </div>
                    </div>
                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Session Ref</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.client_ref }}</span>
                        </div>
                    </div>

                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Studio</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.studio }}</span>
                        </div>
                    </div>

                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Instrument</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.instrument }}</span>
                        </div>
                    </div>
                </div>


                <div class="panel-body">
                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Booker</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.booker }}</span>
                        </div>
                    </div>

                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Booking Requested</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.requested_at }}</span>
                        </div>
                    </div>
                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Requested For</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.requested_from }} - {{ object.requested_to }}</span>
                        </div>
                    </div>

                </div>

                <div class="panel-body">
                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Tuner</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.tuner }}</span>
                        </div>
                    </div>

                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Tuning Booked for</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.booked_time }}</span>
                        </div>
                    </div>
                    <div class="row m-bot20">
                        <div class="col-md-5 col-xs-5">Tuning Completed</div>
                        <div class="col-md-7 col-xs-7">
                            <span class="object">{{ object.completed_at }}</span>
                        </div>
                    </div>

                </div>

                <div class="panel-body">
                    <div class="row m-bot20">
                        <p>Comments</p>

                        <div class="form-group"><a href="#" class="comment"  data-pk="{{ form.ref.value }}" data-value="">add comment</a></div>

{#                        <div class="timeline">#}
{#                            <article class="timeline-item alt">#}
{#                                <div class="text-right">#}
{#                                    <div class="time-show first">#}
{#                                        <a href="#" class="btn btn-primary">Today</a>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </article>#}
                            <span id="comment_list"></span>



                        </div>
                        </span>

                    </div>

            </section>

        </div>
    </div>


{% endblock main %}

{%  block js %}
    <script type='text/x-jquery-tmpl' id="comment_template">

                    <article class="timeline-item alt">
                        <div class="timeline-desk">
                            <div class="panel">
                                <div class="panel-body">
                                    <span class="arrow-alt"></span>

                                    <span class="timeline-icon red">
                                        <i class="fa fa-check"></i>
                                    </span>
                                    <span class="timeline-date">${created}</span>
                                    <h1 class="red">${ago}</h1>
                                    <p>${comment}</p>
                                </div>
                            </div>
                        </div>
                    </article>
     </script>
    <script type="text/javascript">
        API = "{{ API_URL }}"

        $(document).ready(function () {

            init();

        });

        function init() {
            // when page is first loaded


            show_comments({{ object.id }});

        }




    </script>
{% endblock js %}